<app-navbar></app-navbar>

<main class="">
    <ng-container *ngIf="is_loading;else view">
        <div class="vh-100 w-100 d-flex justify-content-center align-items-center">
            <app-loader />
        </div>
    </ng-container>

    <ng-template #view>
        <section class="cover_img d-none d-lg-block" [ngStyle]="{backgroundImage: 'url(' + getCoverImage() + ')'}">
            <div class="cover_img_overlay"></div>
        </section>
        <div class="container monty pt-3 ">
            <div class="row">
                <!-- Anime image and controls -->
                <div class="col-12 col-sm-6 col-xl-3 order-0">
                    <div class="sticky_side_block p-2 p-sm-0">
                        <div class="anime_poster position-relative">
                            <div class="ribbon fw-bold oswald">{{ anime.attributes.startDate | date: 'y' }}</div>
                            <img class="img-fluid" [src]="anime.attributes.posterImage.large" [alt]="anime.attributes.titles.en_jp">
                        </div>
                        <div class="d-flex flex-column gap-2">
                            <button type="button" (click)="onClick()" class="btn btn-primary text-white rounded-pill">Completed</button>
                            <button type="button" (click)="onClick()" class="btn btn-secondary text-white rounded-pill">Want to watch</button>
                            <button type="button" (click)="onClick()" class="btn btn-info text-white rounded-pill">Started watching</button>
                        </div>
                    </div>
                </div>

                <!-- Anime details -->
                <div class="col-12 col-xl-6 pt-3 pt-xl-0 order-2 order-xl-1">
                    <app-tab-menu [type]="type" />
                </div>

                <!-- Extra info and youtube link -->
                <div class="col-12 col-sm-6 col-xl-3 order-1 order-xl-2 pt-3 pt-sm-0">
                    <div class="sticky_side_block">
                        <iframe
                            *ngIf="url"
                            width="100%"
                            height="150"
                            [src]="url"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            style="border-radius: 0.5rem; box-shadow: var(--box-shadow); margin-bottom: 0.75rem;"
                            allowfullscreen
                        ></iframe>
                        <app-card>
                            <h4 class="oswald fw-bold mb-3">Anime Details</h4>
                            <ul class="anime_details">
                                <li *ngFor="let detail of anime_details">
                                    <strong class="anime_details_title monty">{{ detail.title }}:</strong>
                                    <span class="anime_details_value">{{ detail.value }}</span>
                                </li>
                            </ul>
                        </app-card>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>
</main>

<app-footer></app-footer>
